---
layout:     post
title:      "支付之线上流量"
subtitle:   " \"线上各种数据\""
date:       2018-10-17 06:00:00
author:     "青乡"
header-img: "img/post-bg-2015.jpg"
catalog: true
tags:
    - 支付
---


# 线上流量
#### 订单/支付/入金
几十万/日。  
几百万/月。  
几千万/年。

N亿/累计。

---
QPS  
每秒请求高峰几千。    

#### 转账/出金
比入金数据要少。


# web服务器
#### 单机
tomcat几百 //200

nginx几万 //5万

#### web服务器数量
按访问量和数据量的大小  
1.1个服务，1个tomcat服务器。  
2.多个服务，1个tomcat服务器。

---
nginx //静态资源服务器 + 负载均衡  
数量比tomcat少。


# 服务
数量  
总服务数量百位数。//都是不同服务：支付网关web + 核心交易服务 + 后台管理系统 + 基础框架/工具服务

---
架构  
集群架构。

--- 
如何通信？  
分布式服务。//远程服务  

---
1.小的应用  
每个服务的数量 //个位数    
每个服务的内存 //几G

2.核心交易系统  
单个服务的数量 //几十个  
单个服务的内存 //几G

# 数据库
#### 机房
同地多机房。//深圳不同区

#### 每个机房数量
主备。//主写，备读。主备之间使用同步，保持备库数据最新。

# 中间件
1.小的应用    
每个中间件 //个位数。集群架构。

2.核心交易系统  
每个中间件 //十位数。集群架构。



